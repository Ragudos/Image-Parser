<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>utils/src/numbers/compute/engine.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/Ragudos" target="_blank" class="menu-item" id="repository" >My GitHub</a></h2><h3>Classes</h3><ul><li><a href="module-utils_debug_errors-UnimplementedError.html">utils/debug/errors~UnimplementedError</a></li><li><a href="module-utils_debug_errors-UnsupportedError.html">utils/debug/errors~UnsupportedError</a></li></ul><h3>Modules</h3><ul><li><a href="module-core_png.html">core/png</a><ul class='members'><li data-type='member' style='display: none;'><a href="module-core_png.html#.PNG_SIGNATURE">PNG_SIGNATURE</a></li></ul></li><li><a href="module-utils_debug_assert.html">utils/debug/assert</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_debug_assert.html#~assert">assert</a></li></ul></li><li><a href="module-utils_debug_errors.html">utils/debug/errors</a></li><li><a href="module-utils_is.html">utils/is</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_is.html#.isArray">isArray</a></li><li data-type='method' style='display: none;'><a href="module-utils_is.html#.isFunction">isFunction</a></li><li data-type='method' style='display: none;'><a href="module-utils_is.html#.isNumber">isNumber</a></li><li data-type='method' style='display: none;'><a href="module-utils_is.html#.isPlainObject">isPlainObject</a></li><li data-type='method' style='display: none;'><a href="module-utils_is.html#.isString">isString</a></li></ul></li><li><a href="module-utils_numbers_compute_engine.html">utils/numbers/compute/engine</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_numbers_compute_engine.html#~getNumberType">getNumberType</a></li><li data-type='method' style='display: none;'><a href="module-utils_numbers_compute_engine.html#~isSignedByte">isSignedByte</a></li><li data-type='method' style='display: none;'><a href="module-utils_numbers_compute_engine.html#~isSignedInt">isSignedInt</a></li><li data-type='method' style='display: none;'><a href="module-utils_numbers_compute_engine.html#~isSignedShort">isSignedShort</a></li><li data-type='method' style='display: none;'><a href="module-utils_numbers_compute_engine.html#~isUnsignedByte">isUnsignedByte</a></li><li data-type='method' style='display: none;'><a href="module-utils_numbers_compute_engine.html#~isUnsignedShort">isUnsignedShort</a></li></ul></li><li><a href="module-utils_numbers_const.html">utils/numbers/const</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">utils/src/numbers/compute/engine.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @license
 *
 * This code is licensed under the Creative Commons Attribution 4.0 International License (CC BY 4.0).
 * See the LICENSE file for details.
 * Full license text: https://creativecommons.org/licenses/by/4.0/
 * Copyright (c) 2024 Aaron Ragudos
 */

/**
 * **Note**:
 * - Floating points are not supported
 *
 * @fileoverview All main operations for computations
 * @module utils/numbers/compute/engine
 */

const { UnsupportedError } = require("../../debug/errors");
const { MAX_INT_32BIT, MIN_INT_32BIT } = require("../const");

/**
 * @typedef {number | bigint} JsNumber
 */

/**
 * @typedef {"int8" | "int16" | "int32" | "int64" | "uint8" | "uint16" | "uint32" | "uint64"} NumberType
 */

/**
 * # isSignedByte(num)
 *
 * Checks whether `num` is an 8-bit signed integer
 *
 * ## How it works
 *
 * Shift `num` to the left by 24; then, redo it to the right (signed right shift).
 * Then, checks if the resulting value is still equal to `num`.
 *
 * ### Why?
 *
 * First, we need to know the binary/bit representation of numbers in
 * memory. For example, `-128` and `-129`
 *
 * ```javascript
 * -128 // 0b11111111111111111111111110000000 or 32-bit signed, -0x80
 * -129 // 0b11111111111111111111111101111111 or 32-bit signed, -0x80000000
 * ```
 * Notice the difference?
 *
 * In signed integers, it's considered as an 8-bit integer,
 * if all bits from the least significant bit (LSB) up until the 7th bit (6th index)
 * are the only that are either `0` or `1`, while the remaining bits until the most significant
 * bit (MSB) is `1`.
 *
 * So, if we do `num &lt;&lt; 24`, we will get:
 *
 * ```javascript
 * -128 // will be 0b10000000000000000000000000000000 or 32-bit signed, -2147483648
 * -129 // will be 0b01111111000000000000000000000000 or 32-bit signed, 2130706432
 * ```
 *
 * Notice the difference?
 *
 * The most significant bit's (MSB) information about `num`, which
 * is that it is `-129` or a signed integer, is lost.
 *
 * Now, after shifting `num` to the left, do `>> 24`, we will get:
 *
 * ```javascript
 * -128 // will be 0b11111111111111111111111110000000 or 32-bit signed, -128, -0x80
 * -129 // will be 0b00000000000000000000000001111111 or 32-bit signed, 127, 0x7f
 * ```
 *
 * The information that `num` is a signed integer is lost!
 *
 * @param {number} num
 * @returns {boolean}
 *
 * @see {@link https://www.w3schools.com/js/js_bitwise.asp} know how bit shifts work
 */
function isSignedByte(num) {
	return (num &lt;&lt; 24) >> 24 === num;
}

/**
 * # isSignedShort(num)
 *
 * Checks whether `num` is a 16-bit signed integer
 *
 * ## How it works
 *
 * Shift `num` to the left by `16`; then, redo it to the right (signed bit shift).
 * Then, checks if the result is the same as `num`.
 *
 * ### Why?
 *
 * Check {@link isSignedByte} to know more about why this is performed.
 *
 * Instead of `24` from {@link isSignedByte}, `16` is used in this function.
 * Since the start of a 16-bit signed integer's binary/bit representation is:
 *
 * ```javascript
 * -32_768 // 0b11111111111111111000000000000000 or 32-bit signed, -0x8000
 * -32_769 // 0b11111111111111110111111111111111 or 32-bit signed, -0x8001
 * ```
 *
 * Now, do `num &lt;&lt; 16`, we'll get:
 *
 * ```javascript
 * -32_768 // 0b10000000000000000000000000000000 or 32-bit signed, -2147483648, -0x80000000
 * -32_769 // 0b01111111111111110000000000000000 or 32-bit signed, 2147418112, 0x7fff0000
 * ```
 *
 * Now, do `num >> 16`, we'll get:
 *
 * ```javascript
 * -32_768 // 0b11111111111111111000000000000000 or 32-bit signed, -0x8000
 * -32_769 // 0b00000000000000000111111111111111 or 32-bit signed, 32767, 0x7fff
 * ```
 * The bit that indicates it's a signed integer is gone! That's why the information about
 * the original value is lost.
 *
 * @param {number} num
 * @returns {boolean}
 *
 * @see {@link https://www.w3schools.com/js/js_bitwise.asp}
 */
function isSignedShort(num) {
	return (num &lt;&lt; 16) >> 16 === num;
}

/**
 * # isSignedInt(num)
 *
 * Checks whether `num` is a 32-bit signed integer
 *
 * ## How it works
 *
 * This function uses the OR (|) bitwise operator. This is the same as the
 * OR (||) logical operator, except that it returns either 0 or 1. Then,
 * this compares if the result is still the same as `num`.
 *
 * ### Why?
 *
 * This works because all bitwise operations in JavaScript will convert the operands to a 32-bit signed integer when doing them.
 * A 32-bit signed integer has the range of `-2^31` to `2^31 - 1`, while a 32-bit unsigned integer has the range of `0` to `2^32 - 1`.
 * So, if `num` is higher than {@link MAX_INT_32BIT}, doing `num | 0` will flip the bits instead, resulting in a possibly negative number.
 *
 * @param {number} num
 * @returns {boolean}
 */
function isSignedInt(num) {
	return num === (num | 0);
}

/**
 * # isUnsignedByte(num)
 *
 * Checks whether `num` is an 8-bit unsigned integer.
 *
 * ## How it works
 *
 * Applies the AND (&amp;) bitwise operator to `num` and `0xffff00`; then,
 * compares the result to `0`.
 *
 * The AND (&amp;) bitwise operator is somewhat the same
 * as the AND (&amp;&amp;) logical operator; wherein, it will return true if both
 * operands are true and have it be 1, while 0 otherwise.
 *
 * The right-hand side can be considered as a `mask`.
 *
 * ### Why?
 *
 * First, we must know the value of `0xffff00` in binary/bits.
 *
 * ```javascript
 * 0xffff00 // 0b00000000111111111111111100000000
 * 255 // 0b00000000000000000000000011111111
 * 256 // 0b00000000000000000000000100000000
 * ```
 * See the differences? Now, let's perform the AND (&amp;) bitwise operation
 *
 * `255 &amp; 0xffff00`
 *
 * | Operation             | Value    | Binary                             |
 * | --------------------- | -----    | ---------------------------------- |
 * | Original Value        | 255      | 0b00000000000000000000000011111111 |
 * | Mask                  | 0xffff00 | 0b00000000111111111111111100000000 |
 * | Original Value &amp; Mask | 0        | 0b00000000000000000000000000000000 |
 *
 * @param {number} num
 * @returns {boolean}
 *
 * @see {@link https://www.w3schools.com/js/js_bitwise.asp}
 */
function isUnsignedByte(num) {
	return (num &amp; 0xffff00) === 0;
}

/**
 * # isUnsignedShort
 *
 * Checks whether `num` is a 16-bit unsigned integer
 *
 * ## How it works
 *
 * The same as {@link isUnsignedByte}, but instead uses `0xff0000` as the `mask`.
 *
 * @param {number} num
 * @returns {boolean}
 */
function isUnsignedShort(num) {
	return (num &amp; 0xff0000) === 0;
}

/**
 * Despite knowing that, in memory, all numbers in JavaScript are double precision floating-points,
 * and all integers are 32-bit, this still is useful to check the range `num` is in.
 *
 * @param {JsNumber} num
 * @returns {NumberType} returns the type of integer `num` is.
 *
 * @throws {Error} Gets an unsupported number type
 */
function getNumberType(num) {
	if (typeof num === "bigint") {
		throw new UnsupportedError();
	}

	if (isSignedByte(num)) {
		return "int8";
	}

	if (isUnsignedByte(num)) {
		return "uint8";
	}

	if (isSignedShort(num)) {
		return "int16";
	}

	if (isUnsignedShort(num)) {
		return "uint16";
	}

	if (isSignedInt(num)) {
		return "int32";
	}

	if (!(num &lt; 0)) {
		return "uint32";
	}

	throw new UnsupportedError();
}

module.exports = {
	isSignedByte,
	isSignedShort,
	isSignedInt,
	isUnsignedByte,
	isUnsignedShort,
	getNumberType,
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Fri Aug 30 2024 07:22:53 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
